name: Generate Keystore

on:
  workflow_dispatch:  # æ‰‹åŠ¨è§¦å‘

jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
      - name: Generate Keystore and Output Base64
        run: |
          # ç”Ÿæˆç­¾åæ–‡ä»¶
          keytool -genkey -v \
            -keystore release.jks \
            -keyalg RSA \
            -keysize 2048 \
            -validity 10000 \
            -alias my-key-alias \
            -storepass MyPass123456 \
            -keypass MyPass123456 \
            -dname "CN=App Developer, OU=Dev, O=MyCompany, L=Beijing, ST=Beijing, C=CN"
          
          echo ""
          echo "=========================================="
          echo "âœ… ç­¾åæ–‡ä»¶ç”ŸæˆæˆåŠŸï¼"
          echo "=========================================="
          echo ""
          echo "ğŸ“‹ è¯·å¤åˆ¶ä»¥ä¸‹ä¿¡æ¯åˆ° GitHub Secretsï¼š"
          echo ""
          echo "------------------------------------------"
          echo "Secret åç§°: KEYSTORE_PASSWORD"
          echo "Secret å€¼: MyPass123456"
          echo "------------------------------------------"
          echo "Secret åç§°: KEY_ALIAS"
          echo "Secret å€¼: my-key-alias"
          echo "------------------------------------------"
          echo "Secret åç§°: KEY_PASSWORD"
          echo "Secret å€¼: MyPass123456"
          echo "------------------------------------------"
          echo "Secret åç§°: KEYSTORE_BASE64"
          echo "Secret å€¼ (ä¸‹é¢è¿™ä¸€é•¿ä¸²):"
          echo ""
          base64 -w 0 release.jks
          echo ""
          echo ""
          echo "=========================================="
